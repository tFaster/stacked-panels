<div class="stacked-panel">
  <div class="stacked-panel-content"
       [@visibleHiddenContent]="{value: contentVisibleOrHidden$ | async, params: animationParams}">

    @if (isLoading && loadingInfoTemplate) {
      <div class="stacked-panel-content-loading-overlay">
        <ng-template [ngTemplateOutlet]="loadingInfoTemplate"/>
      </div>
    }

    @if (!isLoading) {
      <ng-template [ngTemplateOutlet]="panel.bodyTemplate"
                   [ngTemplateOutletContext]="{$implicit: panelData$, controller: controller, panelId: panel.id, isVisible: isVisible}"/>
    }

  </div>

</div>
